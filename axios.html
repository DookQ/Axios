<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Unsplash Gallery</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs"></script>
  <style>
    body { font-family: sans-serif; padding: 16px; }
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
    }
    .photo-card {
      border: 1px solid #ccc;
      padding: 8px;
      border-radius: 8px;
      box-shadow: 1px 1px 5px rgba(0,0,0,0.1);
    }
    .photo-card img {
      max-width: 100%;
      border-radius: 6px;
    }
    .photo-info {
      margin-top: 8px;
    }
  </style>
</head>
<body>

<h1>Photo Unsplash API</h1>
<div class="gallery" id="gallery"></div>

<script>
const accessKey = 'JRlU3JuWB_wW-4sV9gDzvALbjv13kQphZ4mIg8I6FHg';

async function fetchPhotos(query = 'nature') {
  try {
    const response = await axios.get('https://api.unsplash.com/search/photos', {
      params: {
        query,
        per_page: 10,
        client_id: accessKey
      }
    });
    return response.data.results;
  } catch (error) {
    console.error('เกิดข้อผิดพลาดในการดึงภาพ:', error);
    return [];
  }
}

function renderGallery(photos) {
  const gallery = document.getElementById('gallery');
  gallery.innerHTML = '';

  photos.forEach(photo => {
    const el = document.createElement('div');
    el.className = 'photo-card';

    el.innerHTML = `
      <img src="${photo.urls.small}" alt="${photo.alt_description}">
      <div class="photo-info">
        <p><strong>${photo.user.name}</strong></p>
        <p>อัปโหลดเมื่อ: ${dayjs(photo.created_at).format('YYYY-MM-DD')}</p>
      </div>
    `;

    gallery.appendChild(el);
  });
}

(async function init() {
  const photos = await fetchPhotos('technology'); // เปลี่ยนคำค้นได้
  renderGallery(photos);
})();
</script>

</body>
</html>
